# WADI HMAC 성능 실험 결과 분석

## 실험 개요

**목표**: WADI 데이터셋을 사용한 HMAC(SHA-256) 알고리즘 성능 측정  
**방식**: 외부 서버 검증 대신 순수 성능 측정에 집중  
**측정 지표**: HMAC 생성 시간, 데이터 직렬화 시간, CPU/메모리 사용률, 처리량

## 실험 설정

- **센서 수**: 1개, 10개
- **전송 주파수**: 1Hz, 10Hz
- **측정 시간**: 10초/조건
- **HMAC 키**: 32바이트 서버 제공 키 (Base64: jlbAU8PyY1wTVvQBgZH/qcDIwjN24sluCCDOEJXJsCs=)
- **메시지 형식**: "sensor_value:timestamp"

## 주요 성능 결과

### 1. HMAC 생성 성능

| 센서 수 | 주파수 | 평균 HMAC 생성 시간 | 표준편차 | 샘플 수 |
|---------|--------|-------------------|----------|---------|
| 1개     | 1Hz    | 0.047ms           | 0.024ms  | 10개    |
| 1개     | 10Hz   | 0.060ms           | 0.022ms  | 100개   |
| 10개    | 1Hz    | 0.042ms           | 0.025ms  | 10개    |
| 10개    | 10Hz   | 0.092ms           | 0.144ms  | 100개   |

**분석**:
- HMAC 생성 시간은 평균 **0.042-0.092ms**로 매우 빠름
- 센서 수보다는 **주파수가 HMAC 성능에 더 큰 영향**을 미침
- 높은 주파수(10Hz)에서 표준편차가 커져 성능 변동성이 증가

### 2. 시스템 자원 사용률

#### CPU 사용률
- **1개 센서**: 1Hz에서 23.4%, 10Hz에서 8.1%
- **10개 센서**: 1Hz에서 18.4%, 10Hz에서 8.5%
- **특이점**: 낮은 주파수에서 더 높은 CPU 사용률 (측정 오차 추정)

#### 메모리 사용률
- **1개 센서**: 8.39-8.44GB
- **10개 센서**: 8.93-9.03GB
- **증가량**: 센서 수 10배 증가 시 약 600MB 추가 메모리 사용

### 3. 처리량 (Throughput)

| 센서 수 | 주파수 | 평균 처리량 | 총 데이터 처리량 |
|---------|--------|-------------|------------------|
| 1개     | 1Hz    | 0.026 MB/s  | 0.0016 MB       |
| 1개     | 10Hz   | 0.030 MB/s  | 0.0157 MB       |
| 10개    | 1Hz    | 0.039 MB/s  | 0.0016 MB       |
| 10개    | 10Hz   | 0.030 MB/s  | 0.0155 MB       |

**분석**:
- 센서 수 증가로 단위 시간당 처리량이 **약 30% 향상**
- 주파수 10배 증가로 총 데이터 처리량이 **약 10배 증가**

## 성능 특성 분석

### 1. HMAC 알고리즘 성능
- **매우 빠른 생성 속도**: 평균 0.05-0.09ms
- **일관된 성능**: 표준편차 낮음 (높은 주파수 제외)
- **확장성 우수**: 센서 수 증가에도 성능 저하 미미

### 2. 주파수별 성능 특성
- **1Hz**: 안정적인 성능, 낮은 변동성
- **10Hz**: 약간 높은 HMAC 생성 시간, 높은 변동성
- **처리량**: 주파수에 비례하여 증가

### 3. 센서 수별 성능 특성
- **1개 센서**: 기준 성능, 메모리 사용량 적음
- **10개 센서**: 약간 높은 처리량, 메모리 사용량 증가

## 시각화 분석

### 성능 그래프 특징
1. **HMAC 생성 시간**: 주파수 증가에 따라 선형적으로 증가
2. **처리량**: 센서 수가 많을수록 효율성 향상
3. **CPU 사용률**: 측정 오차로 인한 비정상적 패턴
4. **메모리 사용량**: 센서 수에 비례하여 증가

## 벤치마크 결과

**HMAC SHA-256 순수 생성 성능** (1000회 측정):
- **작은값 (1.5)**: 평균 0.0019ms, 표준편차 0.0012ms
- **중간값 (123.45)**: 평균 0.0018ms, 표준편차 0.0002ms  
- **큰값 (999999.99)**: 평균 0.0018ms, 표준편차 0.0001ms

**결론**: 입력 값 크기와 무관하게 **일정한 HMAC 생성 성능** 유지

## 결론 및 권장사항

### 성능 우수성
1. **매우 빠른 HMAC 생성**: 평균 0.05ms 이하
2. **높은 확장성**: 센서 수 증가에도 성능 안정
3. **효율적 메모리 사용**: 센서 10개 추가 시 600MB 증가

### 실제 적용 시 고려사항
1. **높은 주파수에서 성능 변동성 주의**
2. **메모리 사용량 모니터링 필요**
3. **CPU 사용률 측정 방식 개선 필요**

### 다음 단계
1. **전체 실험 실행** (센서 1,10,50,100개 × 주파수 1,2,10,100Hz × 1000초)
2. **비교 분석** (HAI CKKS와 성능 비교)
3. **최적화 방안 도출**

## 기술적 세부사항

- **HMAC 키 길이**: 32바이트
- **해시 알고리즘**: SHA-256
- **메시지 형식**: UTF-8 인코딩된 "sensor_value:timestamp"
- **출력 형식**: 16진수 (64자리)
- **데이터 직렬화**: JSON 형식
- **측정 도구**: Python time.perf_counter() (마이크로초 정밀도)